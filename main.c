#include "solveur.h"

const char* testr = 
"053000900\
060015000\
000906300\
200000070\
401008090\
006007000\
500080000\
008400260\
040002080";

const char* test2 =
"005000080736000005020007030060071090000000800009230001071000008090000000608020300";

const char* test3 =
"000012300000400000105006700306000070700080009020000108001500403000001000003890000"
"000012300000300000104005600305000060600070002080000105001400903000001000003720000"
"000012300000400000102003400305000040400060007020000106001800903000001000003670000"
"000012300000400000103005600705000060600080009020000108001300807000001000007890000"
"000012300000400000102005600305000060600070008020000107007900403000001000003280000"
"000012300000400000105006700806000040700050009020000105001300408000001000008590000"
"000012300000400000105006700306000070700080005050000108001200403000001000003890000"
"000012300000400000105006200306000020200070008080000107001500403000001000003740000"
"000031200000200000509008100201000070400090001090000804007900602000003000003560000"
"000021800000600000501008300208000040100050007070000908009700604000009000002410000"
"000012300000400000105006700306000070700020004080000102001500903000001000003290000"
"000012300000400000105006700306000070700020004020000108004500903000001000003840000"
"000024800000500000904007200608000020700010009040000705003700406000001000002350000"
"000012300000400000105006700306000050700060008020000109001500802000001000003980000"
"000012300000300000104005600607000010800030007040000205002700106000004000009160000"
"000031600000200000903008400206000040400060009070000108009700501000002000007390000"
"000031800000200000907005200302000040800050009070000108009700501000002000006390000"
"000091800000400000908003100403000010100020008070000903009800604000009000004250000"
"000029100000600000106005800401000090500080007060000503008400609000007000004860000"
"000035900000100000605008200709000020500070003020000408003800509000009000004610000"
"000034500000600000108009700309000070700080005050000108001400203000008000004290000"
"000012300000400000105006700306000050700080009050000104001500903000004000003890000"
"000031200000200000603008400208000050300060001070000806009700602000009000002510000"
"000036200000200000506008400208000050300060001090000804009700602000003000003510000"
"000012300000400000305006700806000050400070009030000402004300201000004000007920000"
"000029100000100000106003700401000090500080006060000403007800604000007000008560000"
"000012300000400000904005700406000020300060007050000106008700402000001000003680000"
"000012300000300000104005200406000070700080009020000108001400903000001000003850000"
"000012300000300000104005600305000060600070004080000107001200903000001000003740000"
"000012300000300000104005600207000010800030002060000807003800109000003000002140000"
"000012300000400000104005200607000080400070003080000504008500109000006000005320000"
"000027600000900000802004500904000050500030008060000104001200809000008000009360000"
"000012300000400000105006700306000040700020008080000109001500403000001000003980000"
"000012300000300000204005600307000020800020009090000507006100408000008000001490000"
"000012300000400000104005200305000020200060007080000106001700403000001000003690000"
"000061700000500000406007300302000050500080001070000902009600408000009000003870000"
"000012300000400000103005600705000060600070008020000107001300409000001000002780000"
"000091400000700000503004900704000050900020001020000604006300507000006000007810000"
"000054700000100000602003100906000010100030002040000508007800604000007000001940000"
"000012300000400000102005600304000060600020007080000109001800402000001000003970000"
"000012300000400000102005600407000080500040001060000702005100207000007000003820000"
"000012300000300000405006100702000030600040008050000902008900604000003000007480000"
"000012300000400000401003500602000030300050007070000805005600108000005000003780000"
"000012300000400000501003600106000030700080006040000709009300208000006000004250000"
"000012300000300000401005600605000010700080009020000704007600102000003000006920000"
"000012300000400000305006800406000080200080007070000104008200405000003000007560000"
"000031200000200000603008400208000040400050001070000908009300602000009000002510000"
"000032500000400000605008400908000030300060004070000806009700602000009000004510000"
"000028500000700000902005700403000070700010008050000603006200904000006000004150000"
"000017500000200000702004600407000020300020005060000803004500901000009000008430000"
"000012300000400000105006700701000080900040002080000906009300205000009000004120000"
"000024700000500000307006200208000040900050006070000108009700601000009000005610000"
"000075100000100000906004700401000020500030006060000403007800602000007000002560000"
"000034700000500000304008200208000040900050006070000908009700601000009000005610000"
"000012300000400000105006700701000020800040009030000806008300905000008000004190000"
"000012300000400000402003100503000020600070004080000601006800209000006000007590000"
"000012300000400000105006700706000020800050003090000806008300609000008000004560000"
"000012300000400000506007100201000080800030007090000501008100706000008000004750000"
"000012300000400000401005600705000010600020007030000806003600109000001000006590000";

int main(void){
  char buffer[82];
  buffer[81] = '\0';
  char buff[82];

  double t, total=0;
  int count=0;
  clock_t t1;
  sudoku_p s = sudoku_new();
  
  while (strlen(test3)>=SIZE){
    count ++;
    memcpy(buffer, test3, SIZE);
    sudoku_reset(s);
    sudoku_init(s, buffer);
    t1 = clock();
    sudoku_solve(s);
    t1 = clock() - t1;
    t = (double) t1 / (double) CLOCKS_PER_SEC;
    total += t;
    string_write(s, buff);
    printf("\nGRID#%d\ninput:\t%s\noutput:\t%s\ntime:\t%lf s\n",
      count, buffer, buff, t);
    test3 += SIZE;
  }
  printf("\n\nNumber of grids:\t%d\nComputation time:\t%lf\nMean:\t%lf\n",
      count, total, (total/count));
  sudoku_free(s);

  return EXIT_SUCCESS;
}
